<!DOCTYPE html>
<html>
<head>
<title>Test</title>
<script src="/BaseFun.js"></script>
<script>

	var fun=function(evt) 
	{
		if (evt.type != "loadend")
			return;
		console.log(evt.target.responseText);
	};
	var Tb0Test = function()
	{
		HttpAsync("Get","http://127.knacc.eaglethewings.com/Db/RmtDb.js?tbfd&0&0",0,fun,0,0);
		HttpAsync("Get","http://127.knacc.eaglethewings.com/Db/RmtDb.js?list&0&0",0,fun,0,0);		
	}
	
	var TbGetTbFd = function()
	{
		var cmd="tbfd";
		var tb_idx=document.getElementById("tbidx").value;			
		var url=sprintf("http://127.knacc.eaglethewings.com/Db/RmtDb.js?%s&%s&0", cmd, tb_idx);
		
		HttpAsync("Get",url,0,fun,0,0);
	}

	var TbGetList = function()
	{
		var cmd="list";
		var tb_idx=document.getElementById("tbidx").value;	
		var url=sprintf("http://127.knacc.eaglethewings.com/Db/RmtDb.js?%s&%s&0", cmd, tb_idx);
		
		HttpAsync("Get",url,0,fun,0,0);
	}

	var TbGetRead = function(tb_idx)
	{
		var cmd="read";
		var tb_idx=document.getElementById("tbidx").value;	
		var rs_id=document.getElementById("rsid").value;	
		var url=sprintf("http://127.knacc.eaglethewings.com/Db/RmtDb.js?%s&%s&%s", cmd, tb_idx, rs_id);
	
		HttpAsync("Get",url,0,fun,0,0);
	}
	
	var TbPostAdd = function()
	{
		var cmd="add";
		var tb_idx=document.getElementById("tbidx").value;			
		var url=sprintf("http://127.knacc.eaglethewings.com/Db/RmtDb.js?%s&%s&0", cmd, tb_idx);
	
		var ary=JsonAryByList("id","name","pswd","desc","1","adddt","upddt");
		var blob=JsonAryToBlob(ary);
		HttpAsync("Post",url,blob,fun,0,0);
	}


	var TbPostUpd = function()
	{
		var cmd="upd";
		var tb_idx=document.getElementById("tbidx").value;	
		var rs_id=document.getElementById("rsid").value;	
		var url=sprintf("http://127.knacc.eaglethewings.com/Db/RmtDb.js?%s&%s&0", cmd, tb_idx);
		
		var ary=JsonAryByList(rs_id,"name0","pswd0","desc0","1","adddt","upddt");
		var blob=JsonAryToBlob(ary);
		HttpAsync("Post",url,blob,fun,0,0);
	}

	var TbPostDel = function()
	{
		var cmd="del";	
		var tb_idx=document.getElementById("tbidx").value;	
		var rs_id=document.getElementById("rsid").value;	
		var url=sprintf("http://127.knacc.eaglethewings.com/Db/RmtDb.js?%s&%s&0", cmd, tb_idx);

		var ary=JsonAryByList(rs_id,"nil","nil","nil","nil","nil","nil");
		var blob=JsonAryToBlob(ary);
		HttpAsync("Post",url,blob,fun,0,0);
	}
	
</script>
</head>
<body>
	TbIdx:<input type="text" id="tbidx" style=" width: 100px;height: 20px; " value="1"><br>
	RsId:<input type="text" id="rsid" style=" width: 100px;height: 20px; " value="1"><br>
	<button onclick="TbGetTbFd();" >TbGetTbFd</button><br>
	<button onclick="TbGetList();" >TbGetList</button><br>
	<button onclick="TbGetRead();" >TbGetRead</button><br>
	<button onclick="TbPostAdd();" >TbPostAdd</button><br>
	<button onclick="TbPostUpd();" >TbPostUpd</button><br>		
	<button onclick="TbPostDel();" >TbPostDel</button><br>	
	<br>
	<input type="text" style=" width: 100px;height: 20px; " value="asdfasf">
</body>
</html>

